<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secret Notes App</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#0b1c2d;
    color:white;
    text-align:center;
    padding:30px;
}
input, textarea, button{
    padding:10px;
    margin:8px;
    border-radius:8px;
    font-size:16px;
    border:none;
}
textarea{
    width:80%;
    height:150px;
}
button{
    background:#00ffff;
    cursor:pointer;
}
#error{
    color:red;
}
#notesSection, #changePasswordSection{
    display:none;
}
</style>
</head>

<body>

<h2>üîê Secret Notes App</h2>

<!-- Setup Password -->
<div id="setupSection">
    <p>Create a Password</p>
    <input type="password" id="newPassword" placeholder="New Password">
    <br>
    <button onclick="setPassword()">Save Password</button>
    <p id="setupError"></p>
</div>

<!-- Login Section -->
<div id="loginSection">
    <p>Enter Password</p>
    <input type="password" id="loginPassword" placeholder="Password">
    <br>
    <button onclick="login()">Login</button>
    <p id="error"></p>
</div>

<!-- Notes Section -->
<div id="notesSection">
    <h3>üìù Your Secret Notes</h3>
    <textarea id="notesArea" placeholder="Write your secret notes here..."></textarea>
    <br>
    <button onclick="saveNotes()">Save Notes</button>
    <button onclick="showChangePassword()">Change Password</button>
    <button onclick="logout()">Logout</button>
</div>

<!-- Change Password -->
<div id="changePasswordSection">
    <p>Change Password</p>
    <input type="password" id="oldPass" placeholder="Old Password"><br>
    <input type="password" id="newPass" placeholder="New Password"><br>
    <button onclick="changePassword()">Update Password</button>
    <p id="changeError"></p>
</div>

<script>
// Check if password exists
if(localStorage.getItem("appPassword")){
    document.getElementById("setupSection").style.display = "none";
    document.getElementById("loginSection").style.display = "block";
}else{
    document.getElementById("setupSection").style.display = "block";
    document.getElementById("loginSection").style.display = "none";
}

// Set password first time
function setPassword(){
    let pass = document.getElementById("newPassword").value;
    if(pass === ""){
        document.getElementById("setupError").innerText = "Password cannot be empty!";
        return;
    }
    localStorage.setItem("appPassword", pass);
    alert("Password saved!");
    location.reload();
}

// Login
function login(){
    let pass = document.getElementById("loginPassword").value;
    let savedPass = localStorage.getItem("appPassword");

    if(pass === savedPass){
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("notesSection").style.display = "block";
        document.getElementById("notesArea").value =
            localStorage.getItem("secretNotes") || "";
    }else{
        document.getElementById("error").innerText = "Wrong password!";
    }
}

// Save notes
function saveNotes(){
    localStorage.setItem("secretNotes",
        document.getElementById("notesArea").value);
    alert("Notes saved!");
}

// Logout
function logout(){
    location.reload();
}

// Show change password section
function showChangePassword(){
    document.getElementById("changePasswordSection").style.display = "block";
}

// Change password
function changePassword(){
    let oldP = document.getElementById("oldPass").value;
    let newP = document.getElementById("newPass").value;
    let savedPass = localStorage.getItem("appPassword");

    if(oldP !== savedPass){
        document.getElementById("changeError").innerText = "Old password is wrong!";
        return;
    }
    if(newP === ""){
        document.getElementById("changeError").innerText = "New password cannot be empty!";
        return;
    }

    localStorage.setItem("appPassword", newP);
    alert("Password changed successfully!");
    document.getElementById("changePasswordSection").style.display = "none";
}
</script>

</body>
</html>